; -*- mode: emacs-lisp; lexical-binding: t -*-

;; Autodetermined by `eldev init'.
(eldev-use-package-archive 'gnu-elpa)
(eldev-use-package-archive 'melpa)

(eldev-use-plugin 'autoloads)

(setf eldev-test-framework 'buttercup)
(eldev-add-loading-roots 'test "tests")

(unless (or (fboundp 'lisp-data-mode)
            (not enable-local-variables))
  ;; Work around the fact that transient's autogenerated package header declares mode:
  ;; lisp-data, which is only present in Emacs 28+, thus breaking the loading of deps
  (message "Old Emacs version, remapping lisp-data-mode")
  (defalias 'lisp-data-mode 'emacs-lisp-mode))

(setf eldev-release-post-release-commit-message "Post-release version bump."
      eldev-release-post-release-commit (lambda (version)
                                          (let ((eldev-release-min-version-size 3))
                                            (eldev-release-next-snapshot-version-unless-already-snapshot version))))
